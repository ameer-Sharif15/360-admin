(()=>{var e={};e.id=240,e.ids=[240],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3497:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>c,originalPathname:()=>u,pages:()=>p,routeModule:()=>h,tree:()=>d}),s(2252),s(1506),s(5866);var t=s(3191),a=s(8716),i=s(7922),n=s.n(i),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(r,l);let d=["",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2252)),"C:\\Users\\hafee\\Desktop\\projects\\360-live\\admin\\app\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"C:\\Users\\hafee\\Desktop\\projects\\360-live\\admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],p=["C:\\Users\\hafee\\Desktop\\projects\\360-live\\admin\\app\\users\\page.tsx"],u="/users/page",c={require:s,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7843:(e,r,s)=>{Promise.resolve().then(s.bind(s,4144))},8432:(e,r,s)=>{Promise.resolve().then(s.bind(s,9660))},3384:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},4144:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});var t=s(326);function a({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{style:{margin:0,fontFamily:"Inter, system-ui, -apple-system, sans-serif",background:"#F7F7F7"},children:(0,t.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[(0,t.jsxs)("header",{style:{marginBottom:24},children:[t.jsx("h1",{style:{margin:0,color:"#1E1E1E"},children:"360 Live Admin"}),t.jsx("p",{style:{margin:0,color:"#555"},children:"Manage services, rooms, and content"})]}),e]})})})}s(7577),s(4047)},9660:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var t=s(326),a=s(7577),i=s(322);let n="users";function o(){let[e,r]=(0,a.useState)([]),[s,o]=(0,a.useState)(!1),[u,c]=(0,a.useState)(null),[h,m]=(0,a.useState)(null),[x,g]=(0,a.useState)(null),[y,v]=(0,a.useState)({}),[f,j]=(0,a.useState)({role:"user",username:"",displayName:"",email:"",password:""}),[b,w]=(0,a.useState)(!1),C=(0,a.useMemo)(()=>{try{return(0,i.Z)()}catch(e){return c(e.message),null}},[]),S=async()=>{if(C){o(!0),c(null);try{let e=await C.databases.listDocuments(C.databaseId,n,[]);r(e.documents)}catch(e){c(e.message)}finally{o(!1)}}},P=e=>{g(e),v({role:e.role,supportType:e.supportType})},q=async()=>{if(C&&x){o(!0),c(null);try{await C.databases.updateDocument(C.databaseId,n,x.$id,{role:y.role,supportType:y.supportType||void 0}),g(null),v({}),await S()}catch(e){c(e.message)}finally{o(!1)}}},T=async()=>{if(!f.username||!f.displayName||!f.email||!f.password){c("Username, Display Name, Email, and Password are required");return}if("support"===f.role&&!f.supportType){c("Support Type is required for support users");return}if(8>(f.password?.length||0)){c("Password must be at least 8 characters long");return}o(!0),c(null);try{let e=await fetch("/api/users/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:f.username,displayName:f.displayName,email:f.email,password:f.password,role:f.role||"user",supportType:"support"===f.role?f.supportType:void 0})}),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to create user");m(`User "${f.displayName}" created successfully! They can now log in with email: ${f.email}`),j({role:"user",username:"",displayName:"",email:"",password:""}),w(!1),await S(),setTimeout(()=>m(null),5e3)}catch(e){c(e.message||"Failed to create user")}finally{o(!1)}},k=e=>{switch(e){case"admin":case"super_admin":return"#3B82F6";case"support":return"#10B981";case"manager":return"#8B5CF6";default:return"#6B7280"}};return(0,t.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,t.jsxs)("div",{style:{background:"#fff",padding:16,borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.06)"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[t.jsx("h2",{style:{marginTop:0},children:"Users Management"}),t.jsx("button",{onClick:()=>{w(!b),g(null),v({})},style:d,children:b?"Cancel":"+ Create User"})]}),u&&t.jsx("p",{style:{color:"red",padding:"8px",background:"#FEE2E2",borderRadius:6,marginBottom:8},children:u}),h&&t.jsx("p",{style:{color:"#10B981",padding:"8px",background:"#D1FAE5",borderRadius:6,marginBottom:8},children:h}),b&&(0,t.jsxs)("div",{style:{display:"grid",gap:12,marginTop:16,padding:16,background:"#F9FAFB",borderRadius:8},children:[t.jsx("h3",{children:"Create New User"}),t.jsx("input",{placeholder:"Username (required)",value:f.username||"",onChange:e=>j(r=>({...r,username:e.target.value})),style:l}),t.jsx("input",{placeholder:"Display Name (required)",value:f.displayName||"",onChange:e=>j(r=>({...r,displayName:e.target.value})),style:l}),t.jsx("input",{type:"email",placeholder:"Email (required)",value:f.email||"",onChange:e=>j(r=>({...r,email:e.target.value})),style:l}),t.jsx("input",{type:"password",placeholder:"Password (required, min 8 characters)",value:f.password||"",onChange:e=>j(r=>({...r,password:e.target.value})),style:l}),(0,t.jsxs)("select",{value:f.role||"user",onChange:e=>j(r=>({...r,role:e.target.value,supportType:void 0})),style:l,children:[t.jsx("option",{value:"user",children:"User"}),t.jsx("option",{value:"manager",children:"Manager"}),t.jsx("option",{value:"support",children:"Support"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"super_admin",children:"Super Admin"})]}),"support"===f.role&&(0,t.jsxs)("select",{value:f.supportType||"",onChange:e=>j(r=>({...r,supportType:e.target.value})),style:l,children:[t.jsx("option",{value:"",children:"Select Support Type (required)"}),t.jsx("option",{value:"reception",children:"Reception (Rooms & Food)"}),t.jsx("option",{value:"services",children:"Services"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:8},children:[t.jsx("button",{onClick:T,disabled:s,style:d,children:s?"Creating...":"Create User"}),t.jsx("button",{onClick:()=>{w(!1),j({role:"user",username:"",displayName:"",email:"",password:""})},style:p,children:"Cancel"})]}),t.jsx("p",{style:{fontSize:12,color:"#666",margin:0},children:"Note: This creates an Appwrite account and user profile. The user can log in immediately with the provided password and change it later."})]}),x&&(0,t.jsxs)("div",{style:{display:"grid",gap:12,marginTop:16},children:[(0,t.jsxs)("h3",{children:["Edit User: ",x.displayName]}),(0,t.jsxs)("select",{value:y.role||"",onChange:e=>v(r=>({...r,role:e.target.value})),style:l,children:[t.jsx("option",{value:"user",children:"User"}),t.jsx("option",{value:"manager",children:"Manager"}),t.jsx("option",{value:"support",children:"Support"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"super_admin",children:"Super Admin"})]}),"support"===y.role&&(0,t.jsxs)("select",{value:y.supportType||"",onChange:e=>v(r=>({...r,supportType:e.target.value})),style:l,children:[t.jsx("option",{value:"",children:"Select Support Type"}),t.jsx("option",{value:"reception",children:"Reception (Rooms & Food)"}),t.jsx("option",{value:"services",children:"Services"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:8},children:[t.jsx("button",{onClick:q,disabled:s,style:d,children:s?"Saving...":"Save Changes"}),t.jsx("button",{onClick:()=>{g(null),v({})},style:p,children:"Cancel"})]})]})]}),(0,t.jsxs)("div",{style:{background:"#fff",padding:16,borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.06)"},children:[t.jsx("h3",{style:{marginTop:0},children:"All Users"}),s&&t.jsx("p",{children:"Loading..."}),!s&&0===e.length&&t.jsx("p",{children:"No users found."}),t.jsx("div",{style:{display:"grid",gap:12},children:e.map(e=>(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:12,borderRadius:10,border:"1px solid #eee"},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[t.jsx("strong",{children:e.displayName}),t.jsx("span",{style:{background:k(e.role)+"20",color:k(e.role),padding:"2px 8px",borderRadius:4,fontSize:12,fontWeight:600},children:e.role}),e.supportType&&t.jsx("span",{style:{background:"#10B98120",color:"#10B981",padding:"2px 8px",borderRadius:4,fontSize:12,fontWeight:600},children:e.supportType})]}),(0,t.jsxs)("div",{style:{color:"#666",fontSize:13},children:["@",e.username]}),t.jsx("div",{style:{color:"#999",fontSize:12},children:e.email})]}),t.jsx("button",{onClick:()=>P(e),style:d,children:"Edit"})]},e.$id))})]})]})}let l={padding:"12px",borderRadius:8,border:"1px solid #e5e5e5",fontSize:14},d={padding:"12px 16px",borderRadius:10,border:"none",background:"#ff7f50",color:"#fff",fontWeight:700,cursor:"pointer"},p={...d,background:"#6B7280"}},322:(e,r,s)=>{"use strict";s.d(r,{Z:()=>n});var t=s(7686);let a="https://fra.cloud.appwrite.io/v1",i="69336519000e10827583";function n(){if(!a||!i)throw Error("Missing Appwrite configuration for admin dashboard");let e=new t.KU().setEndpoint(a).setProject(i),r=new t.Lg(e);return{client:e,databases:r,databaseId:"6933653e00093009e393"}}},1506:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var t=s(8570);let a=(0,t.createProxy)(String.raw`C:\Users\hafee\Desktop\projects\360-live\admin\app\layout.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,t.createProxy)(String.raw`C:\Users\hafee\Desktop\projects\360-live\admin\app\layout.tsx#default`)},2252:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var t=s(8570);let a=(0,t.createProxy)(String.raw`C:\Users\hafee\Desktop\projects\360-live\admin\app\users\page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,t.createProxy)(String.raw`C:\Users\hafee\Desktop\projects\360-live\admin\app\users\page.tsx#default`)},4047:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,471,686],()=>s(3497));module.exports=t})();